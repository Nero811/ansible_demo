- name: Deploy Redis Pod
  hosts: localhost
  tasks:
    - name: Copy Kubeconfig to Remote
      ansible.builtin.copy:
        src: C:\Users\jy811\.kube\config
        dest: /tmp/kubeconfig

    - name: Create Redis Pod
      kubernetes.core.k8s:
        kubeconfig: /tmp/kubeconfig
        state: present
        definition:
          apiVersion: v1
          kind: Pod
          metadata:
            name: redis
            namespace: default
            labels:
              app: redis
          spec:
            containers:
            - name: redis
              image: docker.io/redis:latest
              ports:
              - containerPort: 6379
